<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ttriger ‚Äî –û—Ü–µ–Ω–∫–∞</title>
  <link rel="icon" href="icon-tt.png" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Arial+Black&display=swap');

    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: #000; color: #fff;
      font-family: 'Arial Black', Arial, sans-serif;
      min-height:100vh;
    }
    header {
      display:flex; align-items:center;
      justify-content:space-between;
      padding:15px 30px; border-bottom:1px solid #222;
      flex-wrap:wrap;
    }
    header img.logo { height:50px; cursor:pointer; }
    nav { display:flex; gap:20px; flex-wrap:wrap; margin-top:10px; }
    nav a {
      color:#fff; font-weight:600; text-decoration:none;
      padding:8px 12px; border-radius:4px;
      transition: background .3s;
    }
    nav a:hover, nav a.active { background:#222 }
    main {
      max-width:900px; margin:30px auto; padding:0 20px;
    }
    h1 { font-size:2.5rem; margin-bottom:25px; }
    .slider { margin-bottom:30px; }
    .slider select {
      width:100%; padding:10px; font-size:1rem;
      background:#111; border:none; color:#fff;
      border-radius:6px;
    }
    .criteria {
      margin-bottom:25px;
    }
    .criterion {
      margin-bottom:20px;
    }
    .criterion label {
      display:flex; justify-content:space-between;
      margin-bottom:6px; font-size:1rem;
    }
    .criterion input {
      width:100%; -webkit-appearance:none;
      appearance:none; height:8px; background:#444;
      border-radius:4px; outline:none;
    }
    .criterion input::-webkit-slider-thumb {
      -webkit-appearance:none; width:18px; height:18px;
      background:#fff; border-radius:50%; cursor:pointer;
    }
    .total {
      font-size:1.2rem; margin-top:15px;
      text-align:right;
    }
    button {
      background:#fff; color:#000; font-weight:bold;
      padding:12px 25px; border:none;
      border-radius:6px; cursor:pointer;
      font-size:1rem;
    }
    button:hover { background:#ddd; }
    #status {
      margin-top:15px; font-size:1rem; display:none;
    }
    @media(max-width:600px){
      h1 { font-size:2rem; }
      .criterion label { flex-direction:column; align-items:flex-start; }
      .total { text-align:center; }
    }
  </style>
</head>
<body>
  <header>
    <a href="index.html"><img src="logo-ttriger.png" alt="ttriger" class="logo"></a>
    <nav>
      <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="releases.html">–†–µ–ª–∏–∑—ã</a>
      <a href="ratings.html" class="active">–û—Ü–µ–Ω–∫–∞</a>
      <a href="news.html">–ù–æ–≤–æ—Å—Ç–∏</a>
      <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
      <a href="hidden.html">?</a>
    </nav>
  </header>

  <main>
    <h1>–û—Ü–µ–Ω–∫–∞ —Ç—Ä–µ–∫–æ–≤</h1>

    <div class="slider">
      <select id="releaseSelect">
        <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
      </select>
    </div>

    <div class="criteria">
      <div class="criterion"><label>–í–∞–π–± <span id="vibeVal">5</span>/10</label><input type="range" id="vibe" min="0" max="10" value="5"></div>
      <div class="criterion"><label>–°—Ç–∏–ª—å <span id="styleVal">5</span>/10</label><input type="range" id="style" min="0" max="10" value="5"></div>
      <div class="criterion"><label>–û—Å–∞–¥–æ–∫ <span id="impactVal">5</span>/10</label><input type="range" id="impact" min="0" max="10" value="5"></div>
      <div class="criterion"><label>–°–∞—É–Ω–¥-–¥–∏–∑–∞–π–Ω <span id="soundVal">5</span>/10</label><input type="range" id="sound" min="0" max="10" value="5"></div>
      <div class="criterion"><label>–î–∏–Ω–∞–º–∏–∫–∞ <span id="dynamicsVal">5</span>/10</label><input type="range" id="dynamics" min="0" max="10" value="5"></div>
    </div>

    <div class="total">–û–±—â–∞—è: <span id="totalScore">5.0</span>/10</div>

    <button onclick="submitRating()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    <div id="status"></div>
  </main>

<script>
  // –ü–æ–¥–≥—Ä—É–∑–∫–∞ —Ä–µ–ª–∏–∑–æ–≤ –∏ —Å–∏–Ω–≥–ª–æ–≤
  fetch('releases.html').then(r=>r.text()).then(html=>{
    const d=new DOMParser().parseFromString(html,'text/html');
    const opts = [];
    function parseSection(sec, label){
      d.querySelectorAll(sec+' .release-card').forEach(c=>{
        const t=c.querySelector('.release-title').textContent;
        opts.push({group:label,title:t});
      });
    }
    parseSection('.release-section:nth-child(1)', '–ê–ª—å–±–æ–º');
    parseSection('.release-section:nth-child(2)', '–°–∏–Ω–≥–ª');
    const sel=document.getElementById('releaseSelect');
    sel.innerHTML='<option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ --</option>';
    opts.forEach(o=>{
      const opt=document.createElement('option');
      opt.value=o.title;
      opt.textContent=`${o.group}: ${o.title}`;
      sel.appendChild(opt);
    });
  });

  const sliders=['vibe','style','impact','sound','dynamics'];
  sliders.forEach(id=>{
    const inp=document.getElementById(id), val=document.getElementById(id+'Val');
    inp.oninput=()=>{
      val.textContent=inp.value;
      updateTotal();
    };
  });
  function updateTotal(){
    const sum=sliders.reduce((a,id)=>a+Number(document.getElementById(id).value),0);
    document.getElementById('totalScore').textContent=(sum/sliders.length).toFixed(1);
  }

  function submitRating(){
    const sel=document.getElementById('releaseSelect');
    if(!sel.value){ alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ª–∏–∑!'); return; }
    const vals = sliders.map(id=>Number(document.getElementById(id).value));
    const avg = (vals.reduce((a,b)=>a+b,0)/vals.length).toFixed(1);
    const msg = `üéß –û—Ü–µ–Ω–∫–∞ —Ç—Ä–µ–∫–∞: ${sel.value}
–í–∞–π–±: ${vals[0]}
–°—Ç–∏–ª—å: ${vals[1]}
–û—Å–∞–¥–æ–∫: ${vals[2]}
–°–∞—É–Ω–¥-–¥–∏–∑–∞–π–Ω: ${vals[3]}
–î–∏–Ω–∞–º–∏–∫–∞: ${vals[4]}
–°—Ä–µ–¥–Ω—è—è: ${avg}`;
    fetch('https://api.telegram.org/bot<YOUR_TOKEN>/sendMessage', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({chat_id:'<YOUR_CHAT_ID>', text:msg})
    }).then(r=>{
      document.getElementById('status').textContent='‚úÖ –û—Ü–µ–Ω–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!';
      document.getElementById('status').style.color='lightgreen';
    }).catch(e=>{
      document.getElementById('status').textContent='‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏';
      document.getElementById('status').style.color='#f88';
    });
  }
</script>
</body>
</html>
